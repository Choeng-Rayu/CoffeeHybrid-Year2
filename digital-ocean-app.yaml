name: coffeehybrid
services:
- name: backend
  source_dir: Backend
  github:
    repo: choengrayu233/CoffeeHybrid
    branch: main
  dockerfile_path: Backend/Dockerfile
  env_vars:
  - key: NODE_ENV
    value: production
  - key: PORT
    value: 5000
  - key: DB_HOST
    value: ${DB_HOST}
  - key: DB_PORT
    value: ${DB_PORT}
  - key: DB_NAME
    value: ${DB_NAME}
  - key: DB_USER
    value: ${DB_USER}
  - key: DB_PASSWORD
    value: ${DB_PASSWORD}
  - key: JWT_SECRET
    value: ${JWT_SECRET}
  - key: EMAIL_USER
    value: ${EMAIL_USER}
  - key: EMAIL_PASS
    value: ${EMAIL_PASS}
  - key: GOOGLE_CLIENT_ID
    value: ${GOOGLE_CLIENT_ID}
  - key: GOOGLE_CLIENT_SECRET
    value: ${GOOGLE_CLIENT_SECRET}
  - key: CLOUDINARY_CLOUD_NAME
    value: ${CLOUDINARY_CLOUD_NAME}
  - key: CLOUDINARY_API_KEY
    value: ${CLOUDINARY_API_KEY}
  - key: CLOUDINARY_API_SECRET
    value: ${CLOUDINARY_API_SECRET}
  - key: GMAIL_USER
    value: ${GMAIL_USER}
  - key: GMAIL_APP_PASSWORD
    value: ${GMAIL_APP_PASSWORD}
  - key: SESSION_SECRET
    value: ${SESSION_SECRET}
  - key: DB_DIALECT
    value: mysql
  - key: MOCK_EMAIL
    value: "false"
  http_port: 5000
  instance_size_slug: basic-xxs
  instance_count: 1

- name: frontend
  source_dir: Frontend
  github:
    repo: choengrayu233/CoffeeHybrid
    branch: main
  dockerfile_path: Frontend/Dockerfile
  env_vars:
  - key: VITE_API_BASE_URL
    value: ${BACKEND_URL}/api
  http_port: 80
  instance_size_slug: basic-xxs
  instance_count: 1

- name: bot
  source_dir: Bot
  github:
    repo: choengrayu233/CoffeeHybrid
    branch: main
  dockerfile_path: Bot/Dockerfile
  env_vars:
  - key: BOT_TOKEN
    value: ${BOT_TOKEN}
  - key: API_BASE_URL
    value: ${BACKEND_URL}/api
  - key: WEBHOOK_URL
    value: ${BOT_WEBHOOK_URL}
  - key: NODE_ENV
    value: production
  instance_size_slug: basic-xxs
  instance_count: 1

databases:
- name: coffeehybrid-mysql
  engine: MYSQL
  version: "8"
  size: basic-s
